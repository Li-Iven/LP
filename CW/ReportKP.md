# Отчет по курсовому проекту
## по курсу "Логическое программирование"

### студент: Ивенкова Л.В.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |               |

## Введение

Опишите, какие знания и навыки вы получите в результате выполнения курсового проекта

## Задание

 1. Создать родословное дерево своего рода на несколько поколений (3-4) назад в стандартном формате GEDCOM с использованием сервиса MyHeritage.com 
 2. Преобразовать файл в формате GEDCOM в набор утверждений на языке Prolog, используя следующее представление: ((11-1)+3) mod 4 + 1 = 2: с использованием предикатов parent(родитель, ребёнок), sex(человек, m/f).
 3. Реализовать предикат проверки/поиска ((11-1) mod 7)+1 = 4: Двоюродный брат.
 4. Реализовать программу на языке Prolog, которая позволит определять степень родства двух произвольных индивидуумов в дереве.
 5. [На оценки хорошо и отлично] Реализовать естественно-языковый интерфейс к системе, позволяющий задавать вопросы относительно степеней родства, и получать осмысленные ответы. 

## Получение родословного дерева

Я зарегестрировалась на сайте https://www.myheritage.com/ и создала там своё родословное дерево. Оно состоит из 75 человек. Однако я не знала фамилий некоторых людей, так что указала только их имя. Иногда имена повторялись, тогда я дописывала к ним номер, например: Александр_1. Это нужно, чтобы в будущем при работе с файлом prolog не возникало путаницы в запросах. После всего этого я экспортировала дерево с сайта на свой компьютер.

## Конвертация родословного дерева

Для создания парсера я решила использовать язык Python, так как:
- Во-первых, он легко учится с нуля;
- А во-вторых, в нём легко работать со строками, файлами и массивами.

**Принцип работы программы**

1) Я построчно читаю файл three.ged
2) Если необходимо, делаю транслитерацию имён.
3) Затем создаю два словаря: dict_names и dict_sex, где я буду хранить ID людей плюс их имена и пол соответственно. Читаю файл и заполняю эти словари.
4) Далее создаю массив familys. Затем прохожусь по списку семей в ged-файле. В переменные hus, wife и child записываю имена мужа, жены и ребёнка соответственно. 
5) Затем проверяю, не пусты ли hus и wife. Если нет, то составляю пару "hus, ребёнок" или  "wife, ребёнок".
6) Когда встречаю в строке сочетание "RIN MH:F" (стоящее в конце семей), я делаю hus и wife пустыми.
7) В итоге у нас формируются все нужные нам пары (parent(родитель, ребёнок), sex(человек, m/f)). Мы открываем файл с tree.pl и записываем их туда. Сначала sex(человек, m/f), а потом (parent(родитель, ребёнок), т.к. если вывести их вперемешку, то prolog-файл не примет этого.


## Предикат поиска родственника

Требуется реализовать предикат проверки/поиска двоюродного брата.

Чтобы найти двоюродных братьев какого-нибудь человека, надо ввести запрос: cousin('<имя человека>', X).  
Чтобы определить, является ли человек чьим-нибудь двоюродным братом, надо написать: cousin(X, '<имя человека>').  

Как работает предикат поиска двоюродного брата:

1) Проверяем, что у '<имя человека>' и X есть общие бабушка или дедушка (т.е. их родители приходятся друг другу братом или сестрой). 
2) Проверяем, что пол X - мужской.
3) Проверяем, что X не является братом '<имя человека>'.

Исходный код:  
brother(X,Y) :- parent(A,X), parent(A,Y).  
cousin(X,Y) :- parent(A,X), parent(B,Y), parent(C,A), parent(C,B), sex(Y,'M'), not(brother(X,Y)).  

Примеры запросов/ответов:

2 ?- cousin('Liubov Ivenkova',X).  
X = 'Ivan Rubin' ;  
X = 'Ivan Rubin' ;  
X = 'Timofei Rubin' ;  
X = 'Timofei Rubin' ;  
false.

3 ?- cousin('Vasilii_1 Ivenkov',X).  
X = 'Igor Ivenkov' ;  
X = 'Igor Ivenkov' ;  
false.

4 ?- cousin('Liubov Ivenkova','Ivan Rubin').  
true .

5 ?- cousin('Liubov Ivenkova','Olga Ivenkova').  
false.

6 ?- cousin(X,'Liubov Ivenkova').  
false.

7 ?- cousin(X,'Vasilii_1 Ivenkov').  
X = 'Igor Ivenkov' ;  
X = 'Igor Ivenkov' ;  
X = 'Larisa Ivenkova' ;  
X = 'Larisa Ivenkova' ;  
X = 'Liudmila' ;  
X = 'Liudmila' ;  
X = 'Olga' ;  
X = 'Olga' ;  
false.

## Определение степени родства

Приведите описание метода решения, важные фрагменты исходного кода, протокол работы.

## Естественно-языковый интерфейс

## Выводы

Сформулируйте *содержательные* выводы по курсовому проекту в целом. Чему он вас научила? 
Над чем заставила задуматься? Помните, что несодержательные выводы -
самая частая причина снижения оценки.
